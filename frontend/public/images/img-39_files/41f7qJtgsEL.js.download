(function(p){var c=window.AmazonUIPageJS||window.P,t=c._namespace||c.attributeErrors,l=t?t("DetailPageLookInsideAssets",""):c;l.guardFatal?l.guardFatal(p)(l,window):l.execute(function(){p(l,window)})})(function(p,c,t){function l(g){c.ue&&c.ue.count&&c.ue.tag&&(ue.count(g,0),ue.tag(C()))}function n(g){if("undefined"!==typeof g){var f=c.ue;if(f&&f.count&&f.tag){var d=f.count(g)||0;f.count(g,d+1);f.tag(C())}}}function C(){var c=/ipad|tablet/i.test(navigator.userAgent);return/mobile/i.test(navigator.userAgent)&&
!c?"mobile":c?"tablet":"desktop"}p.when("A","jQuery","ebooksImageBlockATF","cf").execute(function(c,f,d){console.log("DetailPageLookInsideAssets successfully injected")});p.when("A","jQuery","ebooksImageBlockATF","cf").execute(function(g,f,d){function e(){l("litbReaderIframeSrcNotAvailable");l("litbReaderIframeContentWindowNotAvailable");l("litbStickerClickedOnKindleBook");l("bookImageClickedOnKindleBook");D();J.addClass("image-2d");if(d&&d.litbData&&d.litbData.hasLitb&&d.litbData.litbReftag){J.addClass("clickableImage");
var a=document.getElementById("litb-read-frame");a&&a.dataset&&a.dataset.src?a.src=a.dataset.src:n("litbReaderIframeSrcNotAvailable");d.litbData.showNewDesktopLitb&&a?(m.click(function(a){q(!0);K(a.target)&&n("litbStickerClickedOnKindleBook")}),c.addEventListener("popstate",T,!1),c.addEventListener("message",u,!1),N(),a=r(c.location.search),a.asin&&a.format&&q(!1)):m.click(function(a){x(!0);K(a.target)&&n("litbStickerClickedOnKindleBook")})}f(c).resize(p)}function K(a){return a&&("ebooksSitbLogoImg"===
a.getAttribute("id")||"ebooksSitbLogo"===a.getAttribute("id"))}function N(){var a=document.getElementById("litb-read-frame");if(a&&a.contentWindow){if(E){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");if(O>P)return;O++}else a&&n("litbReaderIframeContentWindowNotAvailable");setTimeout(N,Q)}function q(a){R++;E?x(a):R>P||setTimeout(function(){q(a)},Q)}function x(a){a&&n("bookImageClickedOnKindleBook");
var b=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&b&&b.contentWindow?(a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),b.contentWindow.postMessage(a,"*"),y(),b.focus()):(b&&!b.contentWindow&&n("litbReaderIframeContentWindowNotAvailable"),"undefined"!=typeof SitbReader&&SitbReader.LightboxActions.openReader(d.litbData.litbReftag))}function T(){var a=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&
a&&a.contentWindow?(z||!A()&&!B||(y(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),z=!1):a&&n("litbReaderIframeContentWindowNotAvailable");B||v()}function y(){var a=document.getElementById("litb-read-frame");if(a){L=c.scrollY;var b=document.body;b.style.position="fixed";b.style.top="-"+L+"px";b.style.right="0";b.style.left="0";a.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";
B=!0}}function w(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",c.scrollTo(0,parseInt(L||"0",10)),B=!1,a&&v())}function v(){A()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+F()+c.location.hash)}function u(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(W){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?
(z=!0,c.history.go(-1*a.depth),w(!1)):w(!0):"updateLITB"===b&&a.search?(b=r(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+h(a.search)+c.location.hash),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b?E=!0:"reloadLITB"===b&&c.location.reload())}function D(){var a=I.outerWidth(),b=I.outerHeight(),m=t.outerHeight()-(t.outerHeight()-I.outerHeight())/2;J.width(a).height(b);I.css({position:"relative",top:"0",left:"0"});
C.height(m);(c.innerWidth||document.body.offsetWidth)<d.windowWidthThreshold&&p()}function p(){var a=c.innerWidth||document.body.offsetWidth;if(!(0>=a))if(a>d.windowWidthThreshold){a=d.configWidths[1];var b=a/d.holderRatio,m=d.frontImageWidth,h=d.frontImageHeight;G(a,b,m,h)}else a<d.windowWidthThreshold&&(a=d.configWidths[0],b=a/d.holderRatio,d.frontImageAspectRatio>d.holderRatio?(m=a,h=m/d.frontImageAspectRatio):(h=b,m=h*d.frontImageAspectRatio),G(a,b,m,h))}function G(a,b,c,h){if(0<a&&0<b&&0<c&&
0<h){S.length&&H.length&&(S.css("margin-left",a+d.centerColMargin).removeClass("centerColumn"),H.width(a));var g=b+d.containerMargin;m.width(a).height(g);I.width(c).height(h);J.width(c).height(h);C.height(b-(b-I.outerHeight())/2);f(this).trigger("imageResize")}}function r(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}function k(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});
return b}function h(a){if(c.location.search){var b=r(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=a.depth;a=k(b)}else a=k(a);return"?"+a}function F(){var a="";c.location.search&&(a=r(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=k(a));return"?"+a}function A(){var a=r(c.location.search);return a.asin&&a.format}var z=!1,E=!1,B=!1,m=f("#ebooksImageBlock"),a=f("#ebooksImgBlkFront"),b=f("#ebooksImgBlockInlineVideo"),M=f("#ebooksImgBlockInlineVideoSrc");
if(m.length){var t=m.find("#ebooks-img-wrapper"),C=m.find("#ebooksImageBlockContainer"),J=m.find("#ebooks-img-canvas"),I=J.find(".frontImage"),H=f("#leftCol"),S=f("#centerCol");e()}else throw Error("Element with id imageBlock is missing");g.on("a:image:load",function(c){b.length&&M.length&&d.hasCoverImageInlineVideo&&(a.hide(),b.show())});g.loadDynamicImage(a);var Q=100,P=50,O=0,R=0,L=0});p.when("A","jQuery","ImageBlockATF","cf").execute(function(g,f,d){function e(){var h=c.innerWidth||document.body.offsetWidth;
if(!(0>=h))if(h>d.windowWidthThreshold&&q.width()<=d.configWidths[0]){h=d.configWidths[1];var g=h/d.holderRatio,f=d.frontImageWidth,e=d.frontImageHeight;n(h,g,f,e)}else h<d.windowWidthThreshold&&q.width()>d.configWidths[0]&&(h=d.configWidths[0],g=h/d.holderRatio,d.frontImageAspectRatio>d.holderRatio?(f=h,e=f/d.frontImageAspectRatio):(e=g,f=e*d.frontImageAspectRatio),n(h,g,f,e))}function n(c,g,e,k){if(0<c&&0<g&&0<e&&0<k){G.css("margin-left",c+d.centerColMargin).removeClass("centerColumn");t.css("width",
c);var h=g+d.containerMargin+d.flipLinkMinHeight+d.litbHeight;q.css("width",c).css("height",h);l(e,k);p.css("height",g+d.litbHeight-(g+d.litbHeight-u.outerHeight())/2);f(this).trigger("imageResize")}}function l(c,d){u.css("width",c).css("height",d);c=u.width();d=u.height();y.css("width",c).css("height",d);k.resizeCanvas(c);"undefined"!==typeof w&&0<w.length&&(w.css("width",c).css("height",d),v.css("height",d),isShowing3D&&D&&(d=v.width(),r=(c-d)/2-2,v.removeClass("ieTransition").css("left",(c-d)/
2),v.css("transform","perspective(3000px) rotateY(-65deg) translateZ("+r+"px)"),g.delay(function(){v.addClass("ieTransition")},10)))}var q=f("#imageBlock"),x=q.find("#img-wrapper"),p=q.find("#imageBlockContainer"),y=q.find("#img-canvas"),w=y.find(".backImage"),v=y.find(".sideImage"),u=y.find(".frontImage"),D=f.browser.msie||!!navigator.userAgent.match(/Trident/),t=f("#leftCol"),G=f("#centerCol"),r=0,k=new H(g,f,q,d,!0);k.initializeMetrics();(function(){if(u.offset()){var c=x.outerHeight()-(x.outerHeight()-
u.outerHeight())/2,d=v.outerWidth();x.css("position","relative");u.css({position:"relative",top:"0",left:"0"});w.css("position","absolute").css("top","0").css("left","0");v.css("position","absolute").css("top","0").css("left","-"+d+"px");p.css("height",c)}})();y.addClass("image-2d");k.initializeSticker("front");d.disableResize||f(c).resize(e)});p.when("a-modal-handlers").execute("mark-booksimageblock-interactive-time",function(){"function"===typeof c.markFeatureInteractive&&c.markFeatureInteractive("booksImageBlock",
{hasComponents:!0,components:[{name:"thumbnail"}]})});p.when("A","jQuery","MinimalLITBImageBlockATF").execute(function(c,f,d){var e=f("#minimalImageBlock");c=new H(c,f,e,d,!1);c.initializeMetrics();c.initializeSticker(t)});var H=function(){return function(g,f,d,e,p){function K(){var a=document.getElementById("litb-read-frame");if(a){if(A){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");if(50<E)return;
E++}setTimeout(K,100)}function q(a,b){B++;A?x(a,b):50<B?n("litbReadyMaxAttempts"):setTimeout(function(){q(a,b)},100)}function x(a,b){a&&n("litbStickerClickedOnPrintBook");var d=document.getElementById("litb-read-frame");e.litbData&&e.litbData.showNewDesktopLitb&&d?(a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),d.contentWindow.postMessage(a,"*"),v(),d.focus()):"undefined"!=typeof SitbReader&&(n("sitbReaderCodePathUsed"),"back"==b&&SitbReader.currentBook&&
SitbReader.currentBook.bookmarks?(d=SitbReader.currentBook.bookmarks.getFirstAndLastPageNumberByName("Back Cover").first,a=SitbReader.currentBook.bookmarks.getFirstAndLastPageNumberByName("Back Flap").first,d?SitbReader.LightboxActions.openReaderToPage(d):a?SitbReader.LightboxActions.openReaderToPage(a):SitbReader.LightboxActions.openReader(e.litbData.litbReftag)):SitbReader.LightboxActions.openReader(e.litbData.litbReftag))}function t(){D()&&c.history.replaceState({},document.title,c.location.origin+
c.location.pathname+y()+c.location.hash)}function y(){var a="";c.location.search&&(a=k(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=r(a));return"?"+a}function w(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",c.scrollTo(0,parseInt(m||"0",10)),z=!1,a&&t())}function v(){var a=document.getElementById("litb-read-frame");if(a){m=c.scrollY;
var b=document.body;b.style.position="fixed";b.style.top="-"+m+"px";b.style.right="0";b.style.left="0";a.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";z=!0}}function u(){var a=document.getElementById("litb-read-frame");e.litbData&&e.litbData.showNewDesktopLitb&&a&&(F||!D()&&!z||(v(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),F=!1);z||t()}function D(){var a=k(c.location.search);
return a.asin&&a.format}function C(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(M){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(F=!0,c.history.go(-1*a.depth),w(!1)):w(!0):"updateLITB"===b&&a.search?(b=k(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+G(a.search)+c.location.hash),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b?A=!0:"reloadLITB"===b&&c.location.reload())}
function G(a){if(c.location.search){var b=k(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=a.depth;a=r(b)}else a=r(a);return"?"+a}function r(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function k(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}g={};var h=d.find("#litb-canvas"),F=!1,A=!1,z=!1,E=0,B=0,m=0;g.initializeMetrics=function(){l("litbReadyMaxAttempts");
l("litbReaderIframeSrcNotAvailable");l("sitbReaderCodePathUsed");l("litbStickerClickedOnPrintBook")};g.initializeSticker=function(a){if(e&&e.litbData&&(e.litbData.hasLitb&&e.litbData.litbReftag||e.litbData.showNewDesktopLitb)){h.addClass("litb-on-click");h.click(q.bind(this,!0,a));var b=document.getElementById("litb-read-frame");b&&b.dataset&&b.dataset.src?b.src=b.dataset.src:n("litbReaderIframeSrcNotAvailable");e.litbData.showNewDesktopLitb&&b?(c.addEventListener("popstate",u,!1),c.addEventListener("message",
C,!1),K(),b=k(c.location.search),b.asin&&b.format&&q(!1,a)):h.click(x.bind(this,!0,a));a={hasComponents:!0,components:[{name:"mainimage"}]};"function"===typeof c.markFeatureInteractive&&c.markFeatureInteractive("booksImageBlock",a)}};g.resizeCanvas=function(a){h.css("width",a)};return g}}();p.when("A","jQuery","EbooksReadSample","cf").execute(function(c,f,d){(new U(c,f,d)).setupInteractions(d)});p.when("A","jQuery","PbooksReadSample","cf").execute(function(c,f,d){var e=f("#imageBlock"),g=f("#pbooksReadSample");
(new V(c,f,e,d,g)).initializeSticker(t)});var U=function(){return function(g,f,d){function e(){var a=document.getElementById("litb-read-frame");if(a&&a.contentWindow){if(k){a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}a.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");if(E>z)return;E++}else a&&n("litbReaderIframeContentWindowNotAvailable");setTimeout(e,A)}function l(a){B++;k?t(a):B>z||setTimeout(function(){l(a)},A)}function t(a){a&&n("readSampleButtonClicked");
var b=document.getElementById("litb-read-frame");b&&!b.contentWindow&&n("litbReaderIframeContentWindowNotAvailable");d.litbData&&d.litbData.showNewDesktopLitb&&b&&b.contentWindow?(a=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:a}),b.contentWindow.postMessage(a,"*"),x(),b.focus()):d&&d.litbData&&d.litbData.hasLitb&&(c.smash?p.when("mash").execute(function(a){a.navigate({url:d.litbData.litbReaderUrl,transition:"slide"})}):c.location.href=d.litbData.litbReaderUrl)}
function q(){var a=document.getElementById("litb-read-frame");d.litbData&&d.litbData.showNewDesktopLitb&&a&&a.contentWindow?(r||!w()&&!h||(x(),a.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),a.src)),r=!1):a&&n("litbReaderIframeContentWindowNotAvailable");h||y()}function x(){var a=document.getElementById("litb-read-frame");if(a){m=c.scrollY;var b=document.body;b.style.position="fixed";b.style.top="-"+m+"px";b.style.right="0";b.style.left="0";a.style.cssText=
"position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";h=!0}}function C(a){var b=document.getElementById("litb-read-frame");b&&(b.style.cssText="display: none",b=document.body,b.style.position="",b.style.top="",b.style.right="",b.style.left="",c.scrollTo(0,parseInt(m||"0",10)),h=!1,a&&y())}function y(){w()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+G())}function w(){var a=u(c.location.search);return a.asin&&
a.format}function v(a){var b;if(b="string"===typeof a.data)try{JSON.parse(a.data),b=!0}catch(M){b=!1}b&&(a=JSON.parse(a.data),b=a.command,"closeLITB"===b?a.depth?(r=!0,c.history.go(-1*a.depth),C(!1)):C(!0):"updateLITB"===b&&a.search?(b=u(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+H(a.search)),b.asin!==a.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===b&&(k=!0))}function u(a){var b={};0<a.length&&a.substr(1).split("\x26").forEach(function(a){a=
a.split("\x3d");2===a.length&&(b[a[0]]=a[1])});return b}function D(a){var b="";Object.keys(a).forEach(function(c){0<b.length&&(b+="\x26");b+=c+"\x3d"+a[c]});return b}function H(a){if(c.location.search){var b=u(c.location.search);b.asin=a.asin;b.revisionId=a.revisionId;b.format=a.format;b.depth=a.depth;a=D(b)}else a=D(a);return"?"+a}function G(){var a="";c.location.search&&(a=u(c.location.search),delete a.asin,delete a.revisionId,delete a.format,delete a.depth,a=D(a));return"?"+a}g={};var r=!1,k=!1,
h=!1,F=f("#ebooksReadSample");g.setupInteractions=function(){if(d&&d.litbData&&d.litbData.hasLitb&&d.litbData.litbReftag){var a=document.getElementById("litb-read-frame");a&&a.dataset&&a.dataset.src?a.src=a.dataset.src:d.litbData.showNewDesktopLitb&&n("litbReaderIframeSrcNotAvailable");d.litbData.showNewDesktopLitb&&a?(F.click(function(a){l(!0)}),c.addEventListener("popstate",q,!1),c.addEventListener("message",v,!1),e(),a=u(c.location.search),a.asin&&a.format&&l(!1)):F.click(function(a){t(!0)})}};
var A=100,z=20,E=0,B=0,m=0;return g}}(),V=function(){return function(g,f,d,e,p){function t(){var c=document.getElementById("litb-read-frame");if(c){if(F){c.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");return}c.contentWindow.postMessage(JSON.stringify({command:"readyLITB"}),"*");if(50<z)return;z++}setTimeout(t,100)}function q(c,a){E++;F?x(c,a):50<E?n("litbReadyMaxAttempts"):setTimeout(function(){q(c,a)},100)}function x(d){d&&n("printReadSampleButtonClicked");var a=document.getElementById("litb-read-frame");
e.litbData&&e.litbData.showNewDesktopLitb&&a?(d=JSON.stringify({command:"initializeLITB",time:Date.now(),search:c.location.search,newSession:d}),a.contentWindow.postMessage(d,"*"),v(),a.focus()):c.location.href=e.litbData.litbReaderUrl}function C(){D()&&c.history.replaceState({},document.title,c.location.origin+c.location.pathname+y()+c.location.hash)}function y(){var d="";c.location.search&&(d=k(c.location.search),delete d.asin,delete d.revisionId,delete d.format,delete d.depth,d=r(d));return"?"+
d}function w(d){var a=document.getElementById("litb-read-frame");a&&(a.style.cssText="display: none",a=document.body,a.style.position="",a.style.top="",a.style.right="",a.style.left="",c.scrollTo(0,parseInt(B||"0",10)),A=!1,d&&C())}function v(){var d=document.getElementById("litb-read-frame");if(d){B=c.scrollY;var a=document.body;a.style.position="fixed";a.style.top="-"+B+"px";a.style.right="0";a.style.left="0";d.style.cssText="position:fixed; width:100%; height:100%; top:0px; left:0px; z-index:1000; display: block; border: 0 none;";
A=!0}}function u(){var d=document.getElementById("litb-read-frame");e.litbData&&e.litbData.showNewDesktopLitb&&d&&(h||!D()&&!A||(v(),d.contentWindow.postMessage(JSON.stringify({command:"updateLITB",search:c.location.search}),d.src)),h=!1);A||C()}function D(){var d=k(c.location.search);return d.asin&&d.format}function H(d){var a;if(a="string"===typeof d.data)try{JSON.parse(d.data),a=!0}catch(b){a=!1}a&&(d=JSON.parse(d.data),a=d.command,"closeLITB"===a?d.depth?(h=!0,c.history.go(-1*d.depth),w(!1)):
w(!0):"updateLITB"===a&&d.search?(a=k(c.location.search),c.history.pushState({},document.title,c.location.origin+c.location.pathname+G(d.search)+c.location.hash),a.asin!==d.search.asin&&c.dispatchEvent(new PopStateEvent("popstate"))):"readyLITB"===a?F=!0:"reloadLITB"===a&&c.location.reload())}function G(d){if(c.location.search){var a=k(c.location.search);a.asin=d.asin;a.revisionId=d.revisionId;a.format=d.format;a.depth=d.depth;d=r(a)}else d=r(d);return"?"+d}function r(c){var a="";Object.keys(c).forEach(function(b){0<
a.length&&(a+="\x26");a+=b+"\x3d"+c[b]});return a}function k(c){var a={};0<c.length&&c.substr(1).split("\x26").forEach(function(b){b=b.split("\x3d");2===b.length&&(a[b[0]]=b[1])});return a}g={};var h=!1,F=!1,A=!1,z=0,E=0,B=0;g.initializeMetrics=function(){l("litbReadyMaxAttempts");l("litbReaderIframeSrcNotAvailable");l(sitbReaderCodePathUsedMetric);l(litbStickerClickedMetric)};g.initializeSticker=function(d){if(e&&e.litbData&&(e.litbData.hasLitb&&e.litbData.litbReftag||e.litbData.showNewDesktopLitb)){p.click(q.bind(this,
!0,d));var a=document.getElementById("litb-read-frame");a&&a.dataset&&a.dataset.src?a.src=a.dataset.src:n("litbReaderIframeSrcNotAvailable");e.litbData.showNewDesktopLitb&&a?(c.addEventListener("popstate",u,!1),c.addEventListener("message",H,!1),t(),a=k(c.location.search),a.asin&&a.format&&q(!1,d)):p.click(x.bind(this,!0,d))}};return g}}()});